---
- name: Install zsh
  pacman: name=zsh,zsh-completions state=present update_cache=yes

- name: Install autojump
  pacman: name=autojump state=present

- name: Install antigen-git from AUR
  aur: name=antigen-git
  become: yes
  become_user: aur_builder

- name: Copy zsh configuration files
  synchronize: src="{{ item.src }}" dest="{{ item.dest }}"
  with_items:
    - { src: 'zsh', dest: '/etc/' }
    - { src: '.zshrc', dest: "{{ ansible_env.HOME }}/" }
    - { src: '.zsh_aliases', dest: "{{ ansible_env.HOME }}/" }

- name: Change root shell to zsh
  user: name=root shell='/usr/bin/zsh'